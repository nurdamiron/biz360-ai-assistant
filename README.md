# Biz360 ИИ-ассистент разработчика

## Обзор

Biz360 ИИ-ассистент — это система, которая автоматизирует и поддерживает процесс разработки проекта Biz360 CRM. Ассистент способен анализировать требования, планировать задачи, писать код, создавать тесты и автоматически вносить изменения в репозиторий через систему контроля версий.

## Основные возможности

- **Анализ проекта**: Сканирование и индексация кодовой базы для глубокого понимания структуры проекта
- **Декомпозиция задач**: Разбиение сложных задач на логические последовательные подзадачи
- **Генерация кода**: Создание кода на основе спецификаций и требований с учетом архитектуры проекта
- **Автоматическое тестирование**: Создание модульных тестов для сгенерированного кода
- **Интеграция с Git**: Автоматическое создание веток, коммитов и Pull Request'ов
- **Самообучение**: Анализ обратной связи и улучшение результатов работы

## Архитектура

Система построена на модульной архитектуре, состоящей из следующих основных компонентов:

1. **Центр управления (Controller)** - координирует работу всех модулей и управляет очередью задач
2. **Система понимания проекта (Project Understanding)** - анализирует и индексирует код и структуру БД
3. **Планировщик задач (Task Planner)** - декомпозирует и приоритизирует задачи
4. **Генератор кода (Code Generator)** - генерирует код на основе требований и существующего кода
5. **Система контроля версий (VCS Manager)** - управляет Git-операциями и Pull Request'ами

## Технический стек

- **Язык программирования**: Node.js
- **База данных**: MySQL
- **Фреймворки**: Express.js для API
- **LLM API**: Claude API для генерации кода и анализа запросов 
- **Система контроля версий**: Git (через simple-git)
- **Инструменты кодогенерации**: Валидация с ESLint и Node.js

## Установка и настройка

### Предварительные требования

- Node.js 16+ 
- MySQL 8+
- Git
- Доступ к API LLM (Claude или другие)

### Установка

1. Клонировать репозиторий:
```
git clone https://github.com/your-organization/biz360-ai-assistant.git
cd biz360-ai-assistant
```

2. Установить зависимости:
```
npm install
```

3. Настроить переменные окружения в файле `.env`:
```
# Конфигурация базы данных
DB_HOST=your-rds-hostname.amazonaws.com
DB_USER=admin
DB_PASSWORD=your_password
DB_NAME=biz360_ai_assistant
DB_PORT=3306

# Конфигурация LLM API
LLM_API_KEY=your_api_key
LLM_MODEL=claude-3
LLM_API_URL=https://api.anthropic.com/v1

# Конфигурация приложения
PORT=3000
NODE_ENV=development
LOG_LEVEL=debug

# Конфигурация Git
GIT_USERNAME=your_git_username
GIT_TOKEN=your_git_token
```

4. Настроить базу данных:
```
npm run setup-db
```

5. Запустить сервер:
```
npm start
```

## Использование

### API Endpoints

#### Управление задачами

- `GET /api/tasks` - Получить список всех задач
- `GET /api/tasks/:id` - Получить информацию о конкретной задаче
- `POST /api/tasks` - Создать новую задачу
- `PUT /api/tasks/:id` - Обновить существующую задачу
- `DELETE /api/tasks/:id` - Удалить задачу

#### Управление процессами ИИ

- `POST /api/tasks/:id/decompose` - Декомпозировать задачу на подзадачи
- `POST /api/tasks/:id/generate` - Сгенерировать код для задачи
- `PUT /api/tasks/:id/generations/:generationId` - Обновить статус сгенерированного кода
- `POST /api/tasks/:id/generations/:generationId/tests` - Создать тесты для кода

#### Управление контроллером

- `GET /api/status` - Получить текущий статус системы
- `POST /api/controller/start` - Запустить контроллер
- `POST /api/controller/stop` - Остановить контроллер

### Пример использования

1. Создание новой задачи:
```bash
curl -X POST http://localhost:3000/api/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": 1,
    "title": "Реализовать API для фильтрации клиентов по дате последнего контакта",
    "description": "Необходимо создать новый API endpoint для фильтрации клиентов по дате последнего контакта. Endpoint должен принимать параметры from_date и to_date в формате YYYY-MM-DD и возвращать список клиентов, с которыми был контакт в указанный период.",
    "priority": "high"
  }'
```

2. Запуск декомпозиции задачи:
```bash
curl -X POST http://localhost:3000/api/tasks/1/decompose
```

3. Генерация кода:
```bash
curl -X POST http://localhost:3000/api/tasks/1/generate
```

4. Обновление статуса сгенерированного кода (одобрение):
```bash
curl -X PUT http://localhost:3000/api/tasks/1/generations/1 \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "feedback": "Код соответствует требованиям и стилю проекта."
  }'
```

## Настройка проекта

Перед использованием ИИ-ассистента необходимо настроить проект в системе:

1. Добавить проект в таблицу `projects`:
```sql
INSERT INTO projects (name, repository_url, description)
VALUES ('Biz360 CRM', 'https://github.com/your-organization/biz360-crm.git', 'CRM система для управления взаимоотношениями с клиентами');
```

2. Запустить анализ проекта:
```bash
curl -X POST http://localhost:3000/api/projects/1/analyze
```

3. После завершения анализа система готова к работе с задачами проекта.

## Процесс работы

1. **Подготовка проекта** - Система анализирует и индексирует кодовую базу
2. **Создание задач** - Разработчики создают высокоуровневые задачи
3. **Декомпозиция** - ИИ-ассистент разбивает задачи на подзадачи
4. **Генерация кода** - Система генерирует код для подзадач
5. **Код-ревью** - Разработчики проверяют сгенерированный код
6. **Применение изменений** - Система создает коммиты и PR при одобрении кода
7. **Обратная связь** - Система анализирует отклоненный код для улучшения результатов

## Дальнейшее развитие системы

Планируемые улучшения в будущих версиях:

1. **Улучшенное понимание проекта**
   - Анализ потока данных и зависимостей между модулями
   - Выявление архитектурных паттернов и стилей программирования

2. **Расширенная генерация кода**
   - Поддержка других языков программирования (TypeScript, Python)
   - Многоступенчатая генерация для сложных компонентов

3. **Глубокая интеграция с процессом разработки**
   - Интеграция с системами управления проектами (Jira, GitHub Projects)
   - Автоматическое реагирование на комментарии к PR

4. **Система обучения и улучшения**
   - A/B тестирование различных подходов к решению задач
   - Аналитика эффективности и качества генерируемого кода

## Вклад в проект

Мы приветствуем вклад в развитие ИИ-ассистента! Если у вас есть идеи или предложения:

1. Сделайте форк репозитория
2. Создайте ветку с вашим функционалом (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Add some amazing feature'`)
4. Отправьте ветку в ваш форк (`git push origin feature/amazing-feature`)
5. Создайте Pull Request

## Лицензия

[MIT](LICENSE)

## Контакты

Email: ai-support@biz360.com